{% extends "layout.html" %}

{% block body %}
<div class="page-header" >
		<h1>{{team.name}}  
<div class="btn-group">
		    <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
			  <ul class="dropdown-menu">
					      <li> {% if (g.user, "Captain") in members_roles %}
				<a href="{{url_for('edit_team', team_id=team.id)}}"><i class="fa fa-pencil"></i> Edit Team</a>{% endif %}</li>
							      <li> {% if not in_team %}
								  <a href="{{url_for('team_join', team_id=team.id)}}" ><i class="fa fa-envelope"></i> Request to join</a>
{% endif %}</li>
<li>
{% if propose_scrim %}
<a href="{{url_for('propose_scrim', opponent_team_id=team.id)}}"><i class="fa fa-bullseye"></i> Propose Scrim</a>
{% endif %}

</li>
										    </ul>
									</div>
</h1>
</div>

<div class="row">
		<div class="col-lg-8">
				<div class="row">
						<div class="col-md-4">
								<ul class="list-group">
										<li class="list-group-item">
										<span class="badge">{{team.reputation}}</span>
										Reputation
										</li>
										<li class="list-group-item">
										<span class="badge">2</span>
										Wins
										</li>
										<li class="list-group-item">
										<span class="badge">1</span>
										Losses
										</li>
										<li class="list-group-item">
										<span class="badge">{{team.skill_level}}</span>
										Skill level
										</li>
										<li class="list-group-item">
										<span class="badge">{{team.time_zone}}</span>
										Time zone
										</li>

								</ul>
						</div>
						<div class="col-md-8 well" style="height: 200px;">
								this here will be a graph
						</div>
				</div>
				<div class="row">
						<div class="col-md-12">
								<div class="panel panel-info">
										<div class="panel-heading">
												<h3 class="panel-title"><i class="fa fa-users"></i> Members</h3>
							   	</div>
								<table class="table table-striped table-hover">
										<thead>
												<tr>
														<th>Nickname</th>
														<th>Role</th>
														<th>Column heading</th>
														<th>Column heading</th>
												</tr>
										</thead>
										<tbody>
										{% for user, role in members_roles %}
										<tr>
												<td> <a href="{{ url_for('user_page', steam_id=user.steam_id) }}"> {{user.nickname}} </a></td>
												<td> {{role}} </td>
												{% if (g.user, "Captain") in members_roles %}
												<td><a href="{{url_for('promote', team_id=team.id, user_id=user.id)}}">Promote</a></td>
												<td><a href="{{url_for('demote', team_id=team.id, user_id=user.id)}}">Demote</a></td>

{% endif %}
</tr>
{% endfor %}
{% for pending in pendings %}
<tr class="warning">
		<td>{{pending.nickname}}</td>
		<td></td>
		<td></td>
		<td>  <a  href="{{ url_for('team_accept_user', team_id=team.id, user_id=pending.id  )}}"> <span class="label label-warning">Accept user</span></a>
  </td>
</tr> 
{% endfor %}

      </tbody>
</table> 

</div>
<div class="panel panel-warning">
  <div class="panel-heading">
		  <h3 class="panel-title"><i class="fa fa-bullseye"></i> Scrims</h3>
  </div>

<ul class="list-group">
{% for scrim_info in scrims_list %}
	<li class="list-group-item">
	<span class="badge">{{ scrim_info.scrim.date }}
	
	
	</span>

	<strong>Versus:</strong> {{ scrim_info.opponent.name }}<br>
	<em>Map 1:</em> {{ scrim_info.scrim.map1 }}, <em>Map 2:</em> {{ scrim_info.scrim.map2 }}<br>
	Type: {{ scrim_info.scrim.type }}
	
	{% if scrim_info.state == "Finished" %}
		<span class="label label-default">{{ scrim_info.scrim.state }}</span>
		{% if scrim_info.opponent.id == scrim_info.scrim.team2_id %}
			Result: {{ scrim_info.scrim.result }}
		{% else %}
			Result: Opposite of {{ scrim_info.scrim.result }}
		{% endif %}
	{% elif scrim_info.state == "Accepted" %}
		<span class="label label-success">{{ scrim_info.scrim.state }}</span>
	{% elif scrim_info.state == "Rejected" %}
		<span class="label label-danger">{{ scrim_info.scrim.state }}</span>
	{% elif scrim_info.state == "Sent" %}
		<span class="label label-info">{{ scrim_info.scrim.state }}</span>
		<a href="#">Waiting for response</a>
	{% elif scrim_info.state == "Received" %}
		<span class="label label-info">{{ scrim_info.scrim.state }}</span>
		<a href="#">Accept</a> <a href="#">Reject</a>
	{% endif %}
	</li>
{% endfor %}
</ul>

<!-- </div>
<div class="panel panel-warning">
  <div class="panel-heading">
    <h3 class="panel-title">Pending Scrims</h3>
  </div>
<ul class="list-group"> -->
<!-- {% for team, scrim in scrim_sent %}
	<li class="list-group-item">
	<span class="badge">{{ scrim.date }}</span>
	<strong>Versus:</strong> {{team.name}}<br>
	<em>Map 1:</em> {{ scrim.map1 }}<br>
	Type: {{ scrim.type }}
	</li>
{% endfor %} -->
<!-- {% for team, scrim in scrim_received %}
	<li class="list-group-item">
	<span class="badge"> {{ scrim.date }}</span>
	<strong>Versus:</strong> {{team.name}} <a href="{{ url_for('accept_scrim', scrim_id=scrim.id) }}"> Accept</a>
	<a href="{{ url_for('reject_scrim', scrim_id=scrim.id) }}"> Reject</a> <br>
	<em>Map 1:</em> {{ scrim.map1 }}<br>
	Type: {{ scrim.type }}
	</li>

{% endfor %} -->

<!-- </ul>
</div>
	<div class="panel panel-danger">
  <div class="panel-heading">
    <h3 class="panel-title">Rejected Scrims</h3>
  </div>
<ul class="list-group">
{% for team, scrim in scrim_rejected %}
	<li class="list-group-item">
	<span class="badge">{{ scrim.date }}</span>
	<strong>Versus:</strong> {{team.name}}<br>
	<em>Map 1:</em> {{ scrim.map1 }}, <em>Map 2</em> {{ scrim.map2 }}<br>
	Type: {{ scrim.type }}
	</li>
{% endfor %}

</ul> -->
</div>					</div>
				</div>
		</div>
		<div class="col-lg-4">
				<div class="panel panel-primary">
						<div class="panel-heading">
								<h3 class="panel-title">Feedback</h3>
						</div>
						<div class="panel-body">
{% if not com_list %}
<p class="text-muted">There is no feedback for this team yet.</p>
{% else %}
{% for name,text in com_list %}
<div class="col-lg-2">
		ava
</div>
<div class="col-lg-10">
		<strong>{{name}}</strong><br>
		{{text}}
</div>
<hr>
{% endfor %}
{% endif %}
{% if not dont_show %}
<hr>
<form role="form"  action="{{url_for('team_page', team_id=team.id)}}" method="post" name="comment">
		{{form.hidden_tag()}}
<div class="form-group">
{{form.text()}} <br>
<input type="submit" value="Comment">
</div>
</form>
{% endif %}


						</div>
				</div>
		</div>
</div>












<p>Scrim History <a href="{{ url_for('scrim_history', team_id=team.id, page=1) }}"> Link </a></p>


{% endblock %}
